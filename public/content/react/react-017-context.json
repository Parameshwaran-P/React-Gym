{
  "id": "react-017-context-api",
  "title": "Context API",
  "description": "Share data globally without passing props again and again",
  "duration": 11,
  "difficulty": "beginner",
  "tags": ["react", "context", "state-sharing"],
  "prerequisites": ["react-016-custom-hooks"],
  "unlocks": ["react-018-usereducer"],
  "xp": 110,

  "steps": {
    "intro": {
      "type": "game-intro",
      "title": "Stop Passing Props",
      "story": "Data is passed through many components and becomes messy.",
      "preview": "Learn how to share data directly."
    },

    "refresher": {
      "type": "markdown",
      "title": "Real-Life Example",
      "content": "# School Notice Board\n\nTeacher writes notice once\n\nAll students read it\n\n---\n\n## Same in React\n\nData stored once ➜ used by many components"
    },

    "concept": {
      "type": "markdown",
      "title": "What is Context?",
      "content": "Context is used to:\n\n- Share data globally\n- Avoid prop drilling\n- Keep code clean\n\nExamples:\n- Theme (dark/light)\n- User login info\n- Language"
    },

    "concept2": {
      "type": "markdown",
      "title": "What is Prop Drilling?",
      "content": "Prop drilling means:\n\nParent ➜ Child ➜ Grandchild ➜ Deep child\n\nEven if middle components don't need the data."
    },

    "syntax": {
      "type": "markdown",
      "title": "Context Creation Steps",
      "content": "```\n1. createContext()\n2. Provider\n3. Consume data\n```"
    },

    "positive": {
      "type": "interactive-code",
      "title": "Create Context",
      "description": "Create a simple context.",
      "code": "import { createContext } from 'react';\n\nconst ThemeContext = createContext('light');\n\nexport default ThemeContext;",
      "showPreview": false,
      "explanation": "Context is created with a default value."
    },

    "positive2": {
      "type": "interactive-code",
      "title": "Provide Context",
      "description": "Wrap app with provider.",
      "code": "import ThemeContext from './ThemeContext';\n\nfunction App() {\n  return (\n    <ThemeContext.Provider value=\"dark\">\n      <Home />\n    </ThemeContext.Provider>\n  );\n}\n\nexport default App;",
      "showPreview": false,
      "explanation": "Provider sends data to all children."
    },

    "concept3": {
      "type": "markdown",
      "title": "Important Rule",
      "content": "Only components **inside Provider** can access context value."
    },

    "negative": {
      "type": "debug-quiz",
      "title": "Context Not Working",
      "description": "Why is value undefined?",
      "code": "<Component />",
      "question": "What is missing?",
      "options": [
        {
          "id": "a",
          "text": "Component is not wrapped with Provider",
          "isCorrect": true,
          "explanation": "Context works only inside Provider."
        },
        {
          "id": "b",
          "text": "Context name is wrong",
          "isCorrect": false,
          "explanation": "Name is not the main issue here."
        }
      ],
      "lesson": "Always wrap components with Provider."
    },

    "task": {
      "type": "coding-task",
      "title": "Create User Context",
      "description": "Create a context to store username.",
      "requirements": [
        "createContext",
        "export context",
        "default value"
      ],
      "starterCode": "import { createContext } from 'react';\n\n// create user context",
      "solution": "import { createContext } from 'react';\n\nconst UserContext = createContext(null);\n\nexport default UserContext;"
    },

    "challenge": {
      "type": "coding-challenge",
      "title": "Theme Context Setup",
      "description": "Set up theme context for app.",
      "requirements": [
        "Create context",
        "Wrap App",
        "Pass theme value"
      ],
      "solution": "import { createContext } from 'react';\n\nexport const ThemeContext = createContext('light');\n\nfunction App() {\n  return (\n    <ThemeContext.Provider value=\"dark\">\n      <Dashboard />\n    </ThemeContext.Provider>\n  );\n}\n\nexport default App;"
    },

    "memory": {
      "type": "memory-game",
      "title": "Context Memory",
      "pairs": [
        { "concept": "context", "code": "global data" },
        { "concept": "provider", "code": "sends value" },
        { "concept": "prop drilling", "code": "passing too deep" },
        { "concept": "children", "code": "receive data" }
      ]
    },

    "tower": {
      "type": "tower-defense",
      "concepts": [
        {
          "question": "Context is used to?",
          "options": ["style UI", "share data", "handle events", "fetch data"],
          "correct": 1
        },
        {
          "question": "Who can access context?",
          "options": [
            "Any component",
            "Only Provider",
            "Only children inside Provider",
            "Only parent"
          ],
          "correct": 2
        }
      ],
      "waves": 3
    }
  }
}
