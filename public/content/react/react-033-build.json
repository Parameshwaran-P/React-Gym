{
  "id": "react-033-build",
  "title": "Production Build in React",
  "description": "Learn how React apps are optimized and prepared for production deployment",
  "duration": 8,
  "difficulty": "intermediate",
  "tags": ["react", "build", "production", "optimization"],
  "prerequisites": ["react-032-env"],
  "unlocks": ["react-034-project-mini"],
  "xp": 100,

  "steps": {
    "intro": {
      "type": "game-intro",
      "title": "Ready for Production",
      "story": "Your app works locally, but users will access it worldwide.",
      "preview": "Learn how React prepares your app for real users."
    },

    "refresher": {
      "type": "markdown",
      "title": "Real-Life Example",
      "content": "# Packing a Product\n\nYou clean it\n\nRemove extra parts\n\nPack tightly\n\n---\n\nProduction build removes unnecessary code and optimizes performance."
    },

    "concept": {
      "type": "markdown",
      "title": "What is a Build?",
      "content": "A build is:\n- Optimized version of your app\n- Minified code\n- Ready for deployment\n\nUsers never see source code."
    },

    "concept2": {
      "type": "markdown",
      "title": "What Happens During Build?",
      "content": "React build process:\n- Removes dev-only code\n- Minifies JS and CSS\n- Bundles files\n- Optimizes assets\n- Improves performance"
    },

    "concept3": {
      "type": "markdown",
      "title": "Vite Build Command",
      "content": "```\nnpm run build\n```\n\nThis creates a `dist` folder."
    },

    "syntax": {
      "type": "markdown",
      "title": "Build Output",
      "content": "```\ndist/\n ├─ index.html\n ├─ assets/\n │   ├─ app.js\n │   └─ style.css\n```"
    },

    "positive": {
      "type": "interactive-code",
      "title": "Preview Production Build",
      "description": "Test build locally.",
      "code": "npm run build\nnpm run preview",
      "showPreview": false,
      "explanation": "Preview shows exactly what users will see."
    },

    "concept4": {
      "type": "markdown",
      "title": "Why Preview Matters",
      "content": "Preview helps you:\n- Catch build errors\n- Verify env variables\n- Test routing\n- Check performance"
    },

    "negative": {
      "type": "debug-quiz",
      "title": "Build Failed",
      "description": "Build works locally but fails in production.",
      "code": "ReferenceError: process is not defined",
      "question": "What is the issue?",
      "options": [
        {
          "id": "a",
          "text": "Using Node-specific code in frontend",
          "isCorrect": true,
          "explanation": "Browser does not support Node globals."
        },
        {
          "id": "b",
          "text": "React bug",
          "isCorrect": false,
          "explanation": "React is not the issue."
        }
      ],
      "lesson": "Frontend builds must use browser-safe APIs."
    },

    "task": {
      "type": "coding-task",
      "title": "Create Production Build",
      "description": "Generate and verify build output.",
      "requirements": [
        "Run build command",
        "Locate dist folder",
        "Preview build"
      ],
      "starterCode": "npm run dev",
      "solution": "npm run build\nnpm run preview"
    },

    "challenge": {
      "type": "coding-challenge",
      "title": "Build Check",
      "description": "Ensure app is production ready.",
      "requirements": [
        "No console errors",
        "Env variables working",
        "Routing works after refresh"
      ],
      "solution": "Verify using production preview before deployment."
    },

    "memory": {
      "type": "memory-game",
      "title": "Build Memory",
      "pairs": [
        { "concept": "build", "code": "optimized app" },
        { "concept": "dist", "code": "output folder" },
        { "concept": "minify", "code": "reduce size" },
        { "concept": "preview", "code": "test production" }
      ]
    },

    "tower": {
      "type": "tower-defense",
      "concepts": [
        {
          "question": "Which folder is deployed?",
          "options": ["src", "public", "dist", "node_modules"],
          "correct": 2
        },
        {
          "question": "Why preview build?",
          "options": [
            "faster dev",
            "test production",
            "install packages",
            "debug JSX"
          ],
          "correct": 1
        }
      ],
      "waves": 3
    }
  }
}
