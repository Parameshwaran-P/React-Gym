{
  "id": "react-014-useeffect",
  "title": "useEffect Hook",
  "description": "Understand how to run side effects like fetching data, timers, and subscriptions",
  "duration": 10,
  "difficulty": "beginner",
  "tags": ["react", "hooks", "useeffect", "lifecycle"],
  "prerequisites": ["react-013-lifting-state"],
  "unlocks": ["react-015-dependency-array"],
  "xp": 100,

  "steps": {
    "intro": {
      "type": "game-intro",
      "title": "After the Screen Updates",
      "story": "Some work happens after the UI appears. React gives us a hook for that.",
      "preview": "Run code after render."
    },

    "refresher": {
      "type": "markdown",
      "title": "Real-Life Example",
      "content": "# Light Switch\n\nYou enter a room\n\nLight turns ON after entry\n\n---\n\n## Same in React\n\nComponent renders âžœ effect runs"
    },

    "concept": {
      "type": "markdown",
      "title": "What is useEffect?",
      "content": "useEffect lets you run **side effects** after rendering.\n\nSide effects include:\n- API calls\n- Timers\n- Event listeners\n- Logging\n\nSyntax:\n\n```\nuseEffect(() => {\n  // side effect\n});\n```"
    },

    "positive": {
      "type": "interactive-code",
      "title": "Effect Runs After Render",
      "description": "Check console output.",
      "code": "import { useEffect } from 'react';\n\nfunction EffectDemo() {\n  useEffect(() => {\n    console.log('Component rendered');\n  });\n\n  return <p>Hello</p>;\n}\n\nexport default EffectDemo;",
      "showPreview": true,
      "explanation": "Effect runs after every render."
    },

    "concept2": {
      "type": "markdown",
      "title": "Why We Need useEffect",
      "content": "Without useEffect:\n- Code runs during render\n- Causes bugs\n\nWith useEffect:\n- Runs after UI update\n- Safe place for side effects"
    },

    "positive2": {
      "type": "interactive-code",
      "title": "Updating Document Title",
      "description": "Side effect example.",
      "code": "import { useEffect, useState } from 'react';\n\nfunction TitleChanger() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    document.title = `Count ${count}`;\n  });\n\n  return <button onClick={() => setCount(count + 1)}>Add</button>;\n}\n\nexport default TitleChanger;",
      "showPreview": true,
      "explanation": "Document title updates after render."
    },

    "negative": {
      "type": "debug-quiz",
      "title": "Render Bug",
      "description": "Why is this wrong?",
      "code": "document.title = 'Hello';",
      "question": "Where should side effects go?",
      "options": [
        {
          "id": "a",
          "text": "Inside useEffect",
          "isCorrect": true,
          "explanation": "Correct. Side effects belong in useEffect."
        },
        {
          "id": "b",
          "text": "Inside JSX",
          "isCorrect": false,
          "explanation": "JSX should be pure UI."
        }
      ],
      "lesson": "Rendering must stay pure."
    },

    "task": {
      "type": "coding-task",
      "title": "Console Logger",
      "description": "Log message after component loads.",
      "requirements": [
        "Use useEffect",
        "Log once on render"
      ],
      "starterCode": "function Logger() {\n  return <p>Check console</p>;\n}\n\nexport default Logger;",
      "solution": "import { useEffect } from 'react';\n\nfunction Logger() {\n  useEffect(() => {\n    console.log('Component loaded');\n  });\n\n  return <p>Check console</p>;\n}\n\nexport default Logger;",
      "hints": [
        "Import useEffect",
        "Effect runs after render"
      ]
    },

    "challenge": {
      "type": "coding-challenge",
      "title": "Timer Effect",
      "description": "Run effect after render.",
      "requirements": [
        "useEffect",
        "setTimeout",
        "Console log after 1 second"
      ],
      "solution": "import { useEffect } from 'react';\n\nfunction Timer() {\n  useEffect(() => {\n    setTimeout(() => {\n      console.log('1 second passed');\n    }, 1000);\n  });\n\n  return <p>Timer started</p>;\n}\n\nexport default Timer;"
    },

    "memory": {
      "type": "memory-game",
      "title": "Effect Memory",
      "pairs": [
        { "concept": "useEffect", "code": "side effect" },
        { "concept": "render", "code": "UI update" },
        { "concept": "after render", "code": "effect runs" },
        { "concept": "pure UI", "code": "JSX only" }
      ]
    },

    "tower": {
      "type": "tower-defense",
      "concepts": [
        {
          "question": "When does useEffect run?",
          "options": [
            "Before render",
            "During render",
            "After render",
            "Before JSX"
          ],
          "correct": 2
        },
        {
          "question": "What belongs in useEffect?",
          "options": [
            "JSX",
            "CSS",
            "Side effects",
            "Props"
          ],
          "correct": 2
        }
      ],
      "waves": 3
    }
  }
}
