{
  "id": "react-027-state-management",
  "title": "State Management Overview",
  "description": "Understand how state is shared and managed across large React applications",
  "duration": 8,
  "difficulty": "intermediate",
  "tags": ["react", "state", "architecture"],
  "prerequisites": ["react-026-protected-routes"],
  "unlocks": ["react-028-redux"],
  "xp": 130,

  "steps": {
    "intro": {
      "type": "game-intro",
      "title": "Too Many States",
      "story": "Your app is growing. Data needs to be shared everywhere.",
      "preview": "Local state, global state, and when to use each."
    },

    "refresher": {
      "type": "markdown",
      "title": "What We Know So Far",
      "content": "You already used:\n- useState\n- Props\n- Lifting state up\n\nThis works well for small apps."
    },

    "problem": {
      "type": "markdown",
      "title": "The Problem in Large Apps",
      "content": "Imagine this:\n- Login state needed in Navbar\n- Cart data needed in many pages\n- Theme setting used everywhere\n\nPassing props again and again becomes messy."
    },

    "concept": {
      "type": "markdown",
      "title": "What is State Management?",
      "content": "State management means:\n- Where data lives\n- Who can access it\n- How it changes\n\nGoal: Make data predictable and easy to use."
    },

    "concept2": {
      "type": "markdown",
      "title": "Types of State",
      "content": "1. Local State\n- Used inside one component\n- Example: input value\n\n2. Global State\n- Shared across app\n- Example: user login, cart items"
    },

    "concept3": {
      "type": "markdown",
      "title": "Real World Example",
      "content": "Think of a school:\n- Student notebook = local state\n- School notice board = global state\n\nEveryone reads the notice board."
    },

    "overview": {
      "type": "markdown",
      "title": "Common State Management Tools",
      "content": "- React Context\n- Redux / Redux Toolkit\n- Zustand\n\nEach tool solves the same problem differently."
    },

    "positive": {
      "type": "interactive-code",
      "title": "Simple Global State Idea",
      "description": "Sharing user login state.",
      "code": "const isLoggedIn = true;\n\nNavbar uses it\nDashboard uses it\nProfile uses it",
      "showPreview": false,
      "explanation": "Global state avoids prop drilling."
    },

    "negative": {
      "type": "debug-quiz",
      "title": "Prop Drilling Issue",
      "description": "State passed through many components.",
      "code": "<App>\n  <Layout>\n    <Navbar user={user} />\n    <Page user={user} />\n  </Layout>\n</App>",
      "question": "What is the problem here?",
      "options": [
        {
          "id": "a",
          "text": "Too many props passed down",
          "isCorrect": true,
          "explanation": "This is called prop drilling."
        },
        {
          "id": "b",
          "text": "Invalid JSX",
          "isCorrect": false,
          "explanation": "JSX is valid."
        }
      ],
      "lesson": "Global state removes unnecessary prop passing."
    },

    "task": {
      "type": "coding-task",
      "title": "Identify State Type",
      "description": "Decide local or global state.",
      "requirements": [
        "Input value",
        "Theme color",
        "User login",
        "Modal open/close"
      ],
      "solution": "Input and modal can be local. Theme and login should be global.",
      "hints": [
        "Ask: who needs this data?",
        "More users = global"
      ]
    },

    "challenge": {
      "type": "coding-challenge",
      "title": "Choose the Right Tool",
      "description": "Pick best solution for each case.",
      "requirements": [
        "Small app",
        "Medium app",
        "Large app"
      ],
      "solution": "Small: useState, Medium: Context, Large: Redux or Zustand."
    },

    "memory": {
      "type": "memory-game",
      "title": "State Concepts",
      "pairs": [
        { "concept": "Local State", "code": "Component only" },
        { "concept": "Global State", "code": "Shared data" },
        { "concept": "Prop Drilling", "code": "Passing props deeply" },
        { "concept": "State Management", "code": "Data control" }
      ]
    },

    "tower": {
      "type": "tower-defense",
      "concepts": [
        {
          "question": "Best for shared login state?",
          "options": ["useState", "Props", "Global State", "CSS"],
          "correct": 2
        },
        {
          "question": "Prop drilling means?",
          "options": [
            "Too many hooks",
            "Passing props deeply",
            "Multiple reducers",
            "Multiple routes"
          ],
          "correct": 1
        }
      ],
      "waves": 3
    }
  }
}
