{
    "id": "react-005-forms",
    "title": "Controlled Forms",
    "description": "Manage form inputs with React state for full control",
    "duration": 12,
    "difficulty": "intermediate",
    "tags": ["forms", "controlled-components", "inputs"],
    "prerequisites": ["react-004-conditional"],
    "unlocks": ["react-006-context"],
    "xp": 90,
    "steps": {
      "refresher": {
        "type": "markdown",
        "title": "Controlled vs Uncontrolled",
        "content": "# Controlled Components\n\nIn HTML, form elements maintain their own state. In React, we prefer **controlled components** ‚Äî form data is handled by React state.\n\n## Benefits\n\n- Single source of truth\n- Instant validation\n- Easy to reset or pre-fill\n- Conditional fields\n\n## Pattern\n\n```jsx\n<input\n  value={state}\n  onChange={(e) => setState(e.target.value)}\n/>\n```\n\nLet's build a full registration form ‚Üí"
      },
      "positive": {
        "type": "interactive-code",
        "title": "‚úÖ Positive Case: Registration Form",
        "description": "All inputs controlled by state.",
        "code": "import { useState } from 'react';\n\nfunction RegistrationForm() {\n  const [form, setForm] = useState({\n    name: '',\n    email: '',\n    password: '',\n    newsletter: false\n  });\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setForm(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    alert(`Welcome, ${form.name}!`);\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-8 max-w-md mx-auto space-y-6\">\n      <input name=\"name\" value={form.name} onChange={handleChange} placeholder=\"Name\" className=\"w-full px-4 py-2 border rounded\" required />\n      <input name=\"email\" type=\"email\" value={form.email} onChange={handleChange} placeholder=\"Email\" className=\"w-full px-4 py-2 border rounded\" required />\n      <input name=\"password\" type=\"password\" value={form.password} onChange={handleChange} placeholder=\"Password\" className=\"w-full px-4 py-2 border rounded\" required />\n      <label className=\"flex items-center gap-2\">\n        <input name=\"newsletter\" type=\"checkbox\" checked={form.newsletter} onChange={handleChange} />\n        <span>Subscribe to newsletter</span>\n      </label>\n      <button type=\"submit\" className=\"w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700\">Sign Up</button>\n    </form>\n  );\n}\n\nexport default RegistrationForm;",
        "showPreview": true,
        "explanation": "All form data lives in React state ‚Üí full control!"
      },
      "negative": {
        "type": "debug-quiz",
        "title": "üêõ Common Mistake: Uncontrolled Input",
        "description": "This input has value but no onChange. Why doesn't it work?",
        "code": "function BadForm() {\n  const [name, setName] = useState('');\n\n  return (\n    <input\n      value={name}\n      // missing onChange!\n      placeholder=\"Type here\"\n    />\n  );\n}",
        "question": "Why can't the user type in this input?",
        "options": [
          { "id": "a", "text": "value prop is not allowed", "isCorrect": false },
          { "id": "b", "text": "Missing onChange ‚Äî React blocks input changes", "isCorrect": true, "explanation": "‚úÖ Correct! When you set value, you must also handle onChange, otherwise React makes the input read-only." },
          { "id": "c", "text": "Need defaultValue", "isCorrect": false },
          { "id": "d", "text": "useState wrong syntax", "isCorrect": false }
        ],
        "lesson": "**Controlled inputs require both value and onChange.**"
      },
      "task": {
        "type": "coding-task",
        "title": "üõ†Ô∏è Your Turn: Login Form with Validation",
        "description": "Build a login form with live validation feedback.",
        "requirements": [
          "Email and password fields",
          "Show error if fields empty on submit",
          "Show success message on valid submit",
          "Reset after submit"
        ],
        "starterCode": "import { useState } from 'react';\n\nfunction LoginForm() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // TODO: Validate and show message\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-8 max-w-sm mx-auto\">\n      {/* Inputs and feedback */}\n    </form>\n  );\n}\n\nexport default LoginForm;",
        "solution": "import { useState } from 'react';\n\nfunction LoginForm() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [message, setMessage] = useState('');\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (!email || !password) {\n      setMessage('Please fill in all fields');\n      return;\n    }\n    setMessage(`Logged in as ${email} ‚úÖ`);\n    setEmail('');\n    setPassword('');\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-8 max-w-sm mx-auto bg-white rounded-xl shadow-lg space-y-6\">\n      <h2 className=\"text-2xl font-bold text-center\">Login</h2>\n      <input\n        type=\"email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        placeholder=\"Email\"\n        className=\"w-full px-4 py-2 border rounded-lg\"\n        required\n      />\n      <input\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        placeholder=\"Password\"\n        className=\"w-full px-4 py-2 border rounded-lg\"\n        required\n      />\n      {message && (\n        <p className={`text-center ${message.includes('‚úÖ') ? 'text-green-600' : 'text-red-600'}`}>\n          {message}\n        </p>\n      )}\n      <button type=\"submit\" className=\"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700\">\n        Log In\n      </button>\n    </form>\n  );\n}\n\nexport default LoginForm;"
      },
      "challenge": {
        "type": "coding-challenge",
        "title": "üèÜ Challenge: Multi-Step Wizard",
        "description": "Create a 3-step form (Personal ‚Üí Account ‚Üí Review).",
        "requirements": [
          "Next/Back buttons",
          "Collect name, email, username, password",
          "Show summary on final step",
          "Submit only on last step"
        ],
        "starterCode": "import { useState } from 'react';\n\nfunction Wizard() {\n  const [step, setStep] = useState(1);\n  const [data, setData] = useState({ name: '', email: '', username: '', password: '' });\n\n  // TODO: Implement steps and navigation\n\n  return (\n    <div className=\"p-8 max-w-lg mx-auto\">\n      <div className=\"mb-8 flex justify-between\">\n        {[1,2,3].map(n => (\n          <div key={n} className={`w-10 h-10 rounded-full ${step >= n ? 'bg-blue-600' : 'bg-gray-300'} text-white flex items-center justify-center`}>\n            {n}\n          </div>\n        ))}\n      </div>\n      {/* Steps content */}\n    </div>\n  );\n}\n\nexport default Wizard;"
      }
    }
  }