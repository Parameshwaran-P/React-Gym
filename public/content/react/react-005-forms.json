{
  "id": "react-006-forms",
  "title": "Forms & Controlled Inputs",
  "description": "Handle user input and form submission in React using controlled components",
  "duration": 10,
  "difficulty": "beginner",
  "tags": ["forms", "inputs", "controlled-components"],
  "prerequisites": ["react-004-conditional"],
  "unlocks": ["react-006-context"],
  "xp": 60,
  "steps": {
    "refresher": {
      "type": "markdown",
      "title": "üè• Real-Life Story: Patient Admission Form",
      "content": "# üìù Patient Admission System\n\nImagine a hospital front desk.\n\nEvery new patient must fill out a form:\n\n- Name\n- Age\n- Reason for visit\n\nThe system must:\n- Capture data correctly\n- Show what the user typed\n- Submit accurate information\n\n---\n\n## ‚ùå The Problem\n\nIf the system **does not track input values**:\n\n- Typed data is lost\n- UI and data go out of sync\n- Submission fails\n\n---\n\n## üß† Why This Happens\n\nHTML inputs manage their own state by default.\n\nReact **cannot control or trust** the data unless it manages it.\n\n---\n\n## ‚úÖ React Solution: Controlled Components\n\nIn React:\n\n- Input value is controlled by **state**\n- Every change updates state\n- State becomes the **single source of truth**\n\n---\n\n## üîß Basic Pattern\n\n```js\nconst [value, setValue] = useState('');\n\n<input value={value} onChange={(e) => setValue(e.target.value)} />\n```\n\nüëâ **Next: Let‚Äôs build a proper admission form.**"
    },
    "positive": {
      "type": "interactive-code",
      "title": "‚úÖ Positive Case: Controlled Admission Form",
      "description": "The hospital correctly captures and displays patient details.",
      "code": "import { useState } from 'react';\n\nfunction AdmissionForm() {\n  const [name, setName] = useState('');\n  const [age, setAge] = useState('');\n  const [reason, setReason] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    alert(`Admitted: ${name}, Age ${age}, Reason: ${reason}`);\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-6 bg-white rounded shadow space-y-3\">\n      <h2 className=\"text-xl font-bold\">Patient Admission</h2>\n\n      <input\n        type=\"text\"\n        placeholder=\"Patient Name\"\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        className=\"w-full border p-2 rounded\"\n      />\n\n      <input\n        type=\"number\"\n        placeholder=\"Age\"\n        value={age}\n        onChange={(e) => setAge(e.target.value)}\n        className=\"w-full border p-2 rounded\"\n      />\n\n      <input\n        type=\"text\"\n        placeholder=\"Reason for Visit\"\n        value={reason}\n        onChange={(e) => setReason(e.target.value)}\n        className=\"w-full border p-2 rounded\"\n      />\n\n      <button className=\"bg-blue-600 text-white px-4 py-2 rounded\">\n        Admit Patient\n      </button>\n    </form>\n  );\n}\n\nexport default AdmissionForm;",
      "showPreview": true,
      "explanation": "**How it works (Hospital Mapping):**\n\n1. Each input has its own state\n2. Typing updates state instantly\n3. React controls the input value\n4. Form submission reads from state\n\n‚úÖ **Key Rule:** Inputs should reflect React state, not internal browser state."
    },
    "negative": {
      "type": "debug-quiz",
      "title": "üêõ Common Mistake: Uncontrolled Input",
      "description": "The form looks fine, but React doesn‚Äôt know the input value. Why?",
      "code": "function BadForm() {\n  let name = '';\n\n  return (\n    <input\n      type=\"text\"\n      onChange={(e) => (name = e.target.value)}\n    />\n  );\n}",
      "question": "What is the main problem here?",
      "options": [
        {
          "id": "a",
          "text": "State is not used",
          "isCorrect": true,
          "explanation": "‚úÖ Correct! Without state, React cannot track or re-render correctly."
        },
        {
          "id": "b",
          "text": "onChange is invalid",
          "isCorrect": false,
          "explanation": "onChange is valid."
        },
        {
          "id": "c",
          "text": "Inputs must use useEffect",
          "isCorrect": false,
          "explanation": "useEffect is not required."
        },
        {
          "id": "d",
          "text": "HTML inputs cannot store values",
          "isCorrect": false,
          "explanation": "HTML inputs store values, but React doesn‚Äôt control them here."
        }
      ],
      "correctCode": "const [name, setName] = useState('');\n\n<input value={name} onChange={(e) => setName(e.target.value)} />",
      "lesson": "**Real-Life Mistake:**\n\nThis is like writing patient details on paper but never saving them to the hospital system.\n\n‚ùå Data is lost\n\n‚úÖ Always store input values in React state."
    },
    "task": {
      "type": "coding-task",
      "title": "üõ†Ô∏è Your Turn: Doctor Feedback Form",
      "description": "Create a form to collect doctor feedback.",
      "requirements": [
        "Input for doctor name",
        "Textarea for feedback",
        "Controlled inputs",
        "Alert on submit"
      ],
      "starterCode": "import { useState } from 'react';\n\nfunction FeedbackForm() {\n  // TODO: Add state\n\n  function handleSubmit(e) {\n    e.preventDefault();\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-6\">\n      {/* TODO */}\n    </form>\n  );\n}\n\nexport default FeedbackForm;",
      "solution": "import { useState } from 'react';\n\nfunction FeedbackForm() {\n  const [doctor, setDoctor] = useState('');\n  const [feedback, setFeedback] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    alert(`Doctor: ${doctor}\\nFeedback: ${feedback}`);\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-6 space-y-3\">\n      <input\n        value={doctor}\n        onChange={(e) => setDoctor(e.target.value)}\n        placeholder=\"Doctor Name\"\n        className=\"border p-2 w-full\"\n      />\n\n      <textarea\n        value={feedback}\n        onChange={(e) => setFeedback(e.target.value)}\n        placeholder=\"Feedback\"\n        className=\"border p-2 w-full\"\n      />\n\n      <button className=\"bg-green-600 text-white px-4 py-2 rounded\">\n        Submit\n      </button>\n    </form>\n  );\n}\n\nexport default FeedbackForm;",
      "hints": [
        "Every input needs state",
        "Use onChange",
        "Prevent default submit"
      ],
      "tests": [
        "Inputs update state",
        "Form submits correctly",
        "No uncontrolled inputs"
      ]
    },
    "challenge": {
      "type": "coding-challenge",
      "title": "üèÜ Challenge: Patient Registration",
      "description": "Build a full registration form with validation.",
      "requirements": [
        "Name and age inputs",
        "Prevent submission if empty",
        "Show error message conditionally"
      ],
      "starterCode": "import { useState } from 'react';\n\nfunction RegistrationForm() {\n  // TODO\n}\n\nexport default RegistrationForm;",
      "solution": "import { useState } from 'react';\n\nfunction RegistrationForm() {\n  const [name, setName] = useState('');\n  const [age, setAge] = useState('');\n  const [error, setError] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (!name || !age) {\n      setError('All fields are required');\n      return;\n    }\n\n    setError('');\n    alert('Patient Registered');\n  }\n\n  return (\n    <form onSubmit={handleSubmit} className=\"p-6 space-y-3\">\n      <input value={name} onChange={(e) => setName(e.target.value)} placeholder=\"Name\" />\n      <input value={age} onChange={(e) => setAge(e.target.value)} placeholder=\"Age\" />\n\n      {error && <p className=\"text-red-600\">{error}</p>}\n\n      <button className=\"bg-blue-600 text-white px-4 py-2 rounded\">Register</button>\n    </form>\n  );\n}\n\nexport default RegistrationForm;",
      "hints": [
        "Validation before submit",
        "Conditional rendering for errors",
        "State-driven UI"
      ],
      "tests": [
        "Blocks empty submit",
        "Shows error message",
        "Registers when valid"
      ]
    }
  }
}
