{
  "id": "react-012-forms",
  "title": "Forms & Controlled Components",
  "description": "Handle user input safely and correctly in React",
  "duration": 10,
  "difficulty": "beginner",
  "tags": ["react", "forms", "input", "controlled-components"],
  "prerequisites": ["react-011-usestate"],
  "unlocks": ["react-013-lifting-state"],
  "xp": 100,

  "steps": {
    "intro": {
      "type": "game-intro",
      "title": "Talking to the App",
      "story": "User talks to app using forms. App must listen carefully.",
      "preview": "Learn how React listens to input."
    },

    "story": {
      "type": "markdown",
      "title": "Real Life Example: Order Slip",
      "content": "When you fill an order slip:\n\n• You write your name\n• Shop reads it\n• Shop stores it\n\nReact forms work the same way.\nInput ➜ State ➜ UI"
    },

    "concept": {
      "type": "markdown",
      "title": "What is a Controlled Component?",
      "content": "A controlled component means:\n\n• React **controls the input value**\n• Value comes from **state**\n• Changes happen using **onChange**"
    },

    "syntax": {
      "type": "markdown",
      "title": "Basic Form Pattern",
      "content": "```\nconst [value, setValue] = useState('');\n\n<input value={value} onChange={(e) => setValue(e.target.value)} />\n```"
    },

    "positive": {
      "type": "interactive-code",
      "title": "Name Input",
      "description": "Simple controlled input example.",
      "code": "import { useState } from 'react';\n\nfunction NameForm() {\n  const [name, setName] = useState('');\n\n  return (\n    <div>\n      <input\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        placeholder=\"Enter name\"\n      />\n      <p>Hello {name}</p>\n    </div>\n  );\n}\n\nexport default NameForm;",
      "showPreview": true,
      "explanation": "Input value is controlled by React state."
    },

    "concept2": {
      "type": "markdown",
      "title": "Form Submit Handling",
      "content": "React prevents page reload using `preventDefault()`.\n\n```\nfunction handleSubmit(e) {\n  e.preventDefault();\n}\n```"
    },

    "positive2": {
      "type": "interactive-code",
      "title": "Login Form",
      "description": "Handle submit event.",
      "code": "import { useState } from 'react';\n\nfunction Login() {\n  const [email, setEmail] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    alert(email);\n  }\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input value={email} onChange={(e) => setEmail(e.target.value)} />\n      <button>Submit</button>\n    </form>\n  );\n}\n\nexport default Login;",
      "showPreview": true,
      "explanation": "Form submits without page refresh."
    },

    "negative": {
      "type": "debug-quiz",
      "title": "Why is this wrong?",
      "description": "Input is not controlled.",
      "code": "<input onChange={(e) => console.log(e.target.value)} />",
      "question": "What is missing?",
      "options": [
        {
          "id": "a",
          "text": "value attribute",
          "isCorrect": true,
          "explanation": "Without value, React is not controlling input."
        },
        {
          "id": "b",
          "text": "button",
          "isCorrect": false,
          "explanation": "Button is optional."
        }
      ],
      "lesson": "Controlled input needs both value and onChange."
    },

    "task": {
      "type": "coding-task",
      "title": "Email Form",
      "description": "Create a controlled email input.",
      "requirements": [
        "Use useState",
        "Show typed email below"
      ],
      "starterCode": "function Email() {\n  return <input />;\n}\n\nexport default Email;",
      "solution": "import { useState } from 'react';\n\nfunction Email() {\n  const [email, setEmail] = useState('');\n\n  return (\n    <div>\n      <input value={email} onChange={(e) => setEmail(e.target.value)} />\n      <p>{email}</p>\n    </div>\n  );\n}\n\nexport default Email;"
    },

    "challenge": {
      "type": "coding-challenge",
      "title": "Registration Form",
      "description": "Collect name and age.",
      "requirements": [
        "Two inputs",
        "Submit button",
        "Alert values"
      ],
      "solution": "import { useState } from 'react';\n\nfunction Register() {\n  const [name, setName] = useState('');\n  const [age, setAge] = useState('');\n\n  function submit(e) {\n    e.preventDefault();\n    alert(name + ' ' + age);\n  }\n\n  return (\n    <form onSubmit={submit}>\n      <input value={name} onChange={(e) => setName(e.target.value)} />\n      <input value={age} onChange={(e) => setAge(e.target.value)} />\n      <button>Register</button>\n    </form>\n  );\n}\n\nexport default Register;"
    },

    "memory": {
      "type": "memory-game",
      "title": "Form Match",
      "pairs": [
        { "concept": "value", "code": "state" },
        { "concept": "onChange", "code": "update state" },
        { "concept": "preventDefault", "code": "no reload" }
      ]
    }
  }
}
