{
  "id": "react-006-context",
  "title": "Context API",
  "description": "Share data across multiple components without prop-drilling",
  "duration": 10,
  "difficulty": "intermediate",
  "tags": ["context", "state-sharing", "global-state"],
  "prerequisites": ["react-005-forms"],
  "unlocks": ["react-008-usereducer"],
  "xp": 70,
  "steps": {
    "refresher": {
      "type": "markdown",
      "title": "üè• Real-Life Story: Hospital Dashboard",
      "content": "# üè• Hospital Dashboard\n\nIn a hospital, multiple staff members need access to **patient data**:\n\n- Doctor's panel shows patient vitals\n- Nurse panel shows medication schedule\n- Reception shows patient admission info\n\n‚ùå Problem: Passing patient data as props through every component becomes messy.\n\n---\n\n## üß† Why This Happens\n\n- React props flow one-way (parent ‚Üí child)\n- Deep component trees require **prop-drilling**\n- Maintaining consistency becomes hard\n\n---\n\n## ‚úÖ React Solution: Context API\n\n**Context API** allows you to:\n- Create a global state\n- Provide it to multiple components\n- Access it anywhere without passing props manually\n\nThink of it like a **hospital database** that any authorized staff can read from or write to.\n\n---\n\n## üîß Basic Syntax\n\n```js\nimport { createContext, useContext } from 'react';\n\nconst PatientContext = createContext();\n\nfunction App() {\n  const patient = { name: 'Arjun', age: 32 };\n  return (\n    <PatientContext.Provider value={patient}>\n      <DoctorPanel />\n      <NursePanel />\n    </PatientContext.Provider>\n  );\n}\n\nfunction DoctorPanel() {\n  const patient = useContext(PatientContext);\n  return <p>Patient Name: {patient.name}</p>;\n}\n```\n\nüëâ **Next: Let‚Äôs implement a real hospital dashboard with context.**"
    },
    "positive": {
      "type": "interactive-code",
      "title": "‚úÖ Positive Case: Sharing Patient Data",
      "description": "Multiple components read patient data from a single Context.",
      "code": "import { createContext, useContext } from 'react';\n\nconst PatientContext = createContext();\n\nfunction DoctorPanel() {\n  const patient = useContext(PatientContext);\n  return <p>Doctor sees: {patient.name}, Age: {patient.age}</p>;\n}\n\nfunction NursePanel() {\n  const patient = useContext(PatientContext);\n  return <p>Nurse sees: {patient.name}, Age: {patient.age}</p>;\n}\n\nfunction HospitalDashboard() {\n  const patient = { name: 'Meena', age: 28 };\n\n  return (\n    <PatientContext.Provider value={patient}>\n      <div className=\"p-6 space-y-3\">\n        <DoctorPanel />\n        <NursePanel />\n      </div>\n    </PatientContext.Provider>\n  );\n}\n\nexport default HospitalDashboard;",
      "showPreview": true,
      "explanation": "**How it works:**\n\n1. Patient data lives in **Context Provider**\n2. Components call `useContext(PatientContext)` to read it\n3. No props needed, even for deeply nested components\n\n‚úÖ **Key Rule:** Context is for **shared state**, not local component state."
    },
    "negative": {
      "type": "debug-quiz",
      "title": "üêõ Common Mistake: Creating Multiple Providers",
      "description": "Why is this approach problematic?",
      "code": "function App() {\n  return (\n    <PatientContext.Provider value={{name: 'Arjun'}}>\n      <DoctorPanel />\n      <PatientContext.Provider value={{name: 'Meena'}}>\n        <NursePanel />\n      </PatientContext.Provider>\n    </PatientContext.Provider>\n  );\n}",
      "question": "What is the main problem here?",
      "options": [
        {
          "id": "a",
          "text": "Components cannot read Context",
          "isCorrect": false,
          "explanation": "They can read, but from the nearest Provider."
        },
        {
          "id": "b",
          "text": "Multiple Providers create confusing data flow",
          "isCorrect": true,
          "explanation": "‚úÖ Correct! The Nurse sees 'Meena', Doctor sees 'Arjun'. This can confuse state management."
        },
        {
          "id": "c",
          "text": "Context cannot store objects",
          "isCorrect": false,
          "explanation": "Context can store any type."
        },
        {
          "id": "d",
          "text": "useContext hook cannot be used inside components",
          "isCorrect": false,
          "explanation": "useContext works inside functional components."
        }
      ],
      "correctCode": "Use a single Provider for all components:\n<PatientContext.Provider value={patient}>\n  <DoctorPanel />\n  <NursePanel />\n</PatientContext.Provider>",
      "lesson": "**Real-Life Mistake:**\n\nThis is like maintaining **two separate patient databases** in a hospital.\n\n‚ùå Confusing and inconsistent\n\n‚úÖ Keep a single source of truth using Context."
    },
    "task": {
      "type": "coding-task",
      "title": "üõ†Ô∏è Your Turn: Hospital Dashboard",
      "description": "Share patient admission status across components using Context.",
      "requirements": [
        "Create a Context for patient data",
        "Provider in parent component",
        "DoctorPanel, NursePanel read data from Context",
        "Display patient name and age"
      ],
      "starterCode": "import { createContext } from 'react';\n\nconst PatientContext = createContext();\n\nfunction DoctorPanel() {\n  // TODO: Read context\n}\n\nfunction NursePanel() {\n  // TODO: Read context\n}\n\nfunction HospitalDashboard() {\n  const patient = { name: 'Arjun', age: 32 };\n  // TODO: Provide context\n}\n\nexport default HospitalDashboard;",
      "solution": "import { createContext, useContext } from 'react';\n\nconst PatientContext = createContext();\n\nfunction DoctorPanel() {\n  const patient = useContext(PatientContext);\n  return <p>Doctor sees: {patient.name}, Age: {patient.age}</p>;\n}\n\nfunction NursePanel() {\n  const patient = useContext(PatientContext);\n  return <p>Nurse sees: {patient.name}, Age: {patient.age}</p>;\n}\n\nfunction HospitalDashboard() {\n  const patient = { name: 'Arjun', age: 32 };\n\n  return (\n    <PatientContext.Provider value={patient}>\n      <div className=\"p-6 space-y-3\">\n        <DoctorPanel />\n        <NursePanel />\n      </div>\n    </PatientContext.Provider>\n  );\n}\n\nexport default HospitalDashboard;",
      "hints": [
        "Use createContext()",
        "Wrap parent with Provider",
        "useContext() in child"
      ],
      "tests": [
        "DoctorPanel shows correct data",
        "NursePanel shows correct data",
        "No prop drilling used"
      ]
    },
    "challenge": {
      "type": "coding-challenge",
      "title": "üèÜ Challenge: Multi-Staff Access",
      "description": "Create a hospital staff dashboard with Context for multiple patients.",
      "requirements": [
        "Context holds an array of patients",
        "Components can read any patient",
        "No props should be passed manually",
        "Add conditional UI for critical patients"
      ],
      "starterCode": "import { createContext } from 'react';\n\nconst PatientContext = createContext();\n\nfunction StaffPanel() {\n  // TODO: Use context to display patients\n}\n\nfunction HospitalApp() {\n  const patients = [\n    { name: 'Arjun', status: 'Stable' },\n    { name: 'Meena', status: 'Critical' }\n  ];\n\n  // TODO: Provide context\n}\n\nexport default HospitalApp;",
      "solution": "import { createContext, useContext } from 'react';\n\nconst PatientContext = createContext();\n\nfunction StaffPanel() {\n  const patients = useContext(PatientContext);\n\n  return (\n    <div>\n      {patients.map((p) => (\n        <p key={p.name} className={p.status === 'Critical' ? 'text-red-600' : ''}>\n          {p.name} - {p.status}\n        </p>\n      ))}\n    </div>\n  );\n}\n\nfunction HospitalApp() {\n  const patients = [\n    { name: 'Arjun', status: 'Stable' },\n    { name: 'Meena', status: 'Critical' }\n  ];\n\n  return (\n    <PatientContext.Provider value={patients}>\n      <StaffPanel />\n    </PatientContext.Provider>\n  );\n}\n\nexport default HospitalApp;",
      "hints": [
        "Store array in context",
        "use map() to render",
        "Add className conditionally"
      ],
      "tests": [
        "Displays all patients",
        "Critical patients highlighted",
        "No prop drilling used"
      ]
    }
  }
}
