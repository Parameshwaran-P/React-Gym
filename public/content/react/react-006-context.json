{
    "id": "react-006-context",
    "title": "Context API",
    "description": "Share state globally without prop drilling",
    "duration": 11,
    "difficulty": "intermediate",
    "tags": ["state", "context", "prop-drilling", "global-state"],
    "prerequisites": ["react-005-forms"],
    "unlocks": ["react-007-usereducer"],
    "xp": 85,
    "steps": {
      "refresher": {
        "type": "markdown",
        "title": "What is Context?",
        "content": "# Context API\n\n## The Problem: Prop Drilling\n\nPassing props through many layers of components ‚Äî even when intermediate components don't use them ‚Äî makes code hard to maintain.\n\n## Solution: Context\n\nContext provides a way to pass data through the component tree without having to pass props down manually at every level.\n\n## Common Uses\n\n- Theme (light/dark)\n- User authentication\n- Language/i18n\n- Global app settings\n\n## Steps\n\n1. Create context\n2. Provide value at top level\n3. Consume value anywhere below\n\n**Let's build a theme toggle! ‚Üí**"
      },
      "positive": {
        "type": "interactive-code",
        "title": "‚úÖ Positive Case: Theme Context",
        "description": "Toggle dark/light mode across the entire app.",
        "code": "import { createContext, useContext, useState } from 'react';\n\nconst ThemeContext = createContext();\n\nfunction ThemeProvider({ children }) {\n  const [theme, setTheme] = useState('light');\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nfunction Header() {\n  const { theme, toggleTheme } = useContext(ThemeContext);\n\n  return (\n    <header className={`p-6 ${theme === 'dark' ? 'bg-gray-900 text-white' : 'bg-white text-gray-900'} shadow`}>\n      <div className=\"max-w-4xl mx-auto flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold\">React Gym</h1>\n        <button\n          onClick={toggleTheme}\n          className=\"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700\"\n        >\n          {theme === 'light' ? 'üåô Dark' : '‚òÄÔ∏è Light'}\n        </button>\n      </div>\n    </header>\n  );\n}\n\nfunction App() {\n  return (\n    <ThemeProvider>\n      <div className=\"min-h-screen transition-colors duration-300\" style={{ backgroundColor: useContext(ThemeContext)?.theme === 'dark' ? '#1f2937' : '#f3f4f6' }}>\n        <Header />\n        <main className=\"p-8 text-center\">\n          <p className=\"text-2xl\">Toggle the theme above!</p>\n        </main>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;",
        "showPreview": true,
        "explanation": "No prop drilling! Any component can access theme via useContext."
      },
      "negative": {
        "type": "debug-quiz",
        "title": "üêõ Common Mistake: Forgetting Provider",
        "description": "This component tries to use context but crashes. Why?",
        "code": "import { useContext } from 'react';\n\nconst BadComponent = () => {\n  const { user } = useContext(UserContext); // Error!\n\n  return <p>Hello {user.name}</p>;\n};\n\nexport default BadComponent;",
        "question": "Why does this throw an error?",
        "options": [
          { "id": "a", "text": "useContext is not imported", "isCorrect": false },
          { "id": "b", "text": "Component is not wrapped in Provider", "isCorrect": true, "explanation": "‚úÖ Correct! useContext will return undefined or throw if no Provider exists above in the tree." },
          { "id": "c", "text": "UserContext not created", "isCorrect": false },
          { "id": "d", "text": "Destructuring wrong", "isCorrect": false }
        ],
        "lesson": "**Always wrap your app (or part of it) with <Context.Provider>** before consuming."
      },
      "task": {
        "type": "coding-task",
        "title": "üõ†Ô∏è Your Turn: Auth Context",
        "description": "Create an AuthContext with login/logout functionality.",
        "requirements": [
          "AuthProvider with user and login/logout functions",
          "Display user name or 'Guest'",
          "Login button sets fake user",
          "Logout resets to null"
        ],
        "starterCode": "import { createContext, useContext, useState } from 'react';\n\n// TODO: Create AuthContext and Provider\n\nfunction Header() {\n  // TODO: Consume context\n\n  return (\n    <header className=\"p-6 bg-indigo-600 text-white\">\n      <div className=\"max-w-4xl mx-auto flex justify-between\">\n        <h1 className=\"text-2xl font-bold\">My App</h1>\n        {/* Show user and buttons */}\n      </div>\n    </header>\n  );\n}\n\nfunction App() {\n  return (\n    <div>\n      <Header />\n    </div>\n  );\n}\n\nexport default App;",
        "solution": "import { createContext, useContext, useState } from 'react';\n\nconst AuthContext = createContext();\n\nfunction AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n\n  const login = () => setUser({ name: 'Alex Rivera' });\n  const logout = () => setUser(null);\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout }}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nfunction Header() {\n  const { user, login, logout } = useContext(AuthContext);\n\n  return (\n    <header className=\"p-6 bg-indigo-600 text-white shadow-lg\">\n      <div className=\"max-w-4xl mx-auto flex justify-between items-center\">\n        <h1 className=\"text-2xl font-bold\">My App</h1>\n        <div className=\"flex items-center gap-4\">\n          <p>Welcome, <strong>{user ? user.name : 'Guest'}</strong></p>\n          {user ? (\n            <button onClick={logout} className=\"px-4 py-2 bg-red-600 rounded hover:bg-red-700\">Logout</button>\n          ) : (\n            <button onClick={login} className=\"px-4 py-2 bg-green-600 rounded hover:bg-green-700\">Login</button>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <div className=\"min-h-screen bg-gray-100\">\n        <Header />\n        <main className=\"p-12 text-center\">\n          <p className=\"text-xl\">Try logging in/out!</p>\n        </main>\n      </div>\n    </AuthProvider>\n  );\n}\n\nexport default App;"
      },
      "challenge": {
        "type": "coding-challenge",
        "title": "üèÜ Challenge: Shopping Cart Context",
        "description": "Build a cart context with add/remove items and count.",
        "requirements": [
          "CartProvider with items array and functions",
          "Show cart count in header",
          "Add/Remove buttons",
          "Display cart items"
        ],
        "starterCode": "import { createContext, useContext, useState } from 'react';\n\n// TODO: Implement CartContext\n\nfunction Header() { /* Show cart count */ }\nfunction ProductList() { /* Add to cart buttons */ }\nfunction Cart() { /* List items with remove */ }\n\nfunction App() {\n  return (\n    <div className=\"p-8\">\n      <Header />\n      <ProductList />\n      <Cart />\n    </div>\n  );\n}\n\nexport default App;"
      }
    }
  }

 